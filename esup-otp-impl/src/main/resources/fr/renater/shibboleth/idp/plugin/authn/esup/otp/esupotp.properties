###############################
#  EsupOtp configuration  #
###############################

## SERVER CONFIG ##

# Required.
idp.esup.otp.apiHost=
idp.esup.otp.apiPassword=tobedefine
idp.esup.otp.usersSecret=tobedefine

# Required. Only true/false allowed:
#privacyidea.verify_ssl=true

# Optional.
idp.esup.otp.supportedMethods=totp,webauthn,push,bypass,random_code,random_code_mail
#idp.esup.otp.redirectURL=
#idp.esup.otp.endpoint.health=

####################################
#  Example MFA flow configuration  #
####################################


# Path for the MFA flow configuration file: $idp_install_path/conf/authn/mfa-authn-config.xml

# Example of the MFA flow mapping:

#<util:map id="shibboleth.authn.MFA.TransitionMap">
#   <entry key="">
#       <bean parent="shibboleth.authn.MFA.Transition" p:nextFlow="authn/Password"/>
#   </entry>
#   <entry key="authn/Password">
#       <bean parent="shibboleth.authn.MFA.Transition" p:nextFlow="authn/EsupOtp"/>
#   </entry>
#</util:map>

############################################
#  Example authn.properties configuration  #
############################################


# Path for the authn.properties file: $idp_install_path/conf/authn/authn.properties

# To enable the MFA login flow and add the following line:
#idp.authn.flows = MFA

#### MFA ####

#idp.authn.MFA.order = 1000
#idp.authn.MFA.passiveAuthenticationSupported = true
#idp.authn.MFA.forcedAuthenticationSupported = true
#idp.authn.MFA.validateLoginTransitions = true
# Defaults to set AuthnInstant based on oldest component result
#idp.authn.MFA.useLatestTimestamp = false
# The list below almost certainly requires changes, and should generally be the
# union of any of the separate factors you combine in your particular MFA flow
# rules. The example corresponds to the example in mfa-authn-config.xml that
# combines IPAddress with Password.
idp.authn.MFA.supportedPrincipals = \
    saml2/https://refeds.org/profile/mfa, \
    saml2/urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport, \
    saml2/urn:oasis:names:tc:SAML:2.0:ac:classes:Password, \
    saml1/urn:oasis:names:tc:SAML:1.0:am:password, \
    saml1/https://refeds.org/profile/mfa

# Generic flow properties to adjust behavior
#idp.authn.esupOtp.order = 1000
#idp.authn.esupOtp.forcedAuthenticationSupported = true
# The list below should be changed to reflect whatever locally- or
# community-defined values are appropriate to represent WebAuthn. It is
# strongly advised that the value not be specific to WebAuthn or any
# particular technology to avoid lock-in.
idp.authn.esupOtp.supportedPrincipals = \
    saml2/https://refeds.org/profile/mfa, \
    saml1/https://refeds.org/profile/mfa

# To activate the SSO for all flows, make sure to enable it by adding (e.g.):
#idp.authn.MFA.reuseCondition=shibboleth.Conditions.TRUE
#idp.authn.Password.reuseCondition=shibboleth.Conditions.TRUE
#idp.authn.esupOtp.reuseCondition=shibboleth.Conditions.TRUE
#idp.authn.esupOtp.activationCondition=shibboleth.Conditions.TRUE
